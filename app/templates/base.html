<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Alo!Mana?{% endblock %}</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/logo-favicon-alomana.png') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="{% block body_class %}{% endblock %}">
    <header class="main-header">
        <div class="header-container">
            <div class="search-wrapper">
                <form class="search-container" action="{{ url_for('store.products_page') }}" method="get">
                    <input
                        type="text"
                        name="q"
                        placeholder="Busque por batom, blush, base..."
                        value="{{ request.args.get('q', '') }}"
                        aria-label="Buscar produtos"
                    >
                    <button class="search-btn" type="submit" aria-label="Buscar">
                        <svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="icon-search">
                            <path
                                d="M16.6 18L10.3 11.7C9.8 12.1 9.225 12.4167 8.575 12.65C7.925 12.8833 7.23333 13 6.5 13C4.68333 13 3.14583 12.3708 1.8875 11.1125C0.629167 9.85417 0 8.31667 0 6.5C0 4.68333 0.629167 3.14583 1.8875 1.8875C3.14583 0.629167 4.68333 0 6.5 0C8.31667 0 9.85417 0.629167 11.1125 1.8875C12.3708 3.14583 13 4.68333 13 6.5C13 7.23333 12.8833 7.925 12.65 8.575C12.4167 9.225 12.1 9.8 11.7 10.3L18 16.6L16.6 18ZM6.5 11C7.75 11 8.8125 10.5625 9.6875 9.6875C10.5625 8.8125 11 7.75 11 6.5C11 5.25 10.5625 4.1875 9.6875 3.3125C8.8125 2.4375 7.75 2 6.5 2C5.25 2 4.1875 2.4375 3.3125 3.3125C2.4375 4.1875 2 5.25 2 6.5C2 7.75 2.4375 8.8125 3.3125 9.6875C4.1875 10.5625 5.25 11 6.5 11Z"
                                fill="currentColor"
                            />
                        </svg>
                    </button>
                </form>
            </div>

            <a href="{{ url_for('store.home_page') }}">
                <img class="logo-alomana" src="{{ url_for('static', filename='img/logo-alomana.png') }}" alt="Alo!Mana? Logo">
            </a>

            <div class="header-actions">
                <div class="header-auth-links">
                    {% if current_user %}
                        <span class="header-user-badge">{{ current_user.username }}</span>
                        <a class="header-inline-link" href="{{ url_for('user.orders_page') }}">Meus pedidos</a>
                        <form action="{{ url_for('user.logout') }}" method="post">
                            <button class="header-inline-button" type="submit">Sair</button>
                        </form>
                    {% else %}
                        <a class="header-inline-link" href="{{ url_for('user.login_page') }}">Login usuaria</a>
                        <a class="header-inline-link" href="{{ url_for('user.register_page') }}">Cadastro</a>
                    {% endif %}

                    {% if current_admin %}
                        <a class="header-inline-link admin-link" href="{{ url_for('admin.occurrences_page') }}">Painel admin</a>
                    {% else %}
                        <a class="header-inline-link admin-link" href="{{ url_for('admin.login_page') }}">Login admin</a>
                    {% endif %}
                </div>

                <div class="dark-mode-wrapper">
                    <label class="switch" aria-label="Alternar tema">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider"></span>
                    </label>
                    <span class="dark-mode-text">Dark-Mode</span>
                </div>
                <a href="{{ url_for('store.cart_page') }}" class="cart-link" aria-label="Carrinho">
                    <svg viewBox="0 0 54 54" xmlns="http://www.w3.org/2000/svg" class="icon-cart">
                        <path
                            d="M16 53.33c-1.47 0-2.72-.52-3.77-1.57-1.04-1.04-1.56-2.3-1.56-3.76s.52-2.72 1.56-3.77c1.05-1.04 2.3-1.57 3.77-1.57s2.72.53 3.77 1.57c1.04 1.05 1.56 2.3 1.56 3.77s-.52 2.72-1.56 3.77c-1.05 1.05-2.3 1.57-3.77 1.57zm26.67 0c-1.47 0-2.72-.52-3.77-1.57-1.04-1.04-1.56-2.3-1.56-3.76s.52-2.72 1.56-3.77c1.05-1.04 2.3-1.57 3.77-1.57s2.72.53 3.77 1.57c1.04 1.05 1.56 2.3 1.56 3.77s-.52 2.72-1.56 3.77c-1.05 1.05-2.3 1.57-3.77 1.57zM13.73 10.67l6.4 13.33H38.8l7.33-13.33H13.73zM11.2 5.33h39.33c1.03 0 1.8.46 2.34 1.37.53.9.55 1.83.06 2.76l-9.46 17.07c-.49.89-1.15 1.58-1.97 2.07-.82.49-1.72.73-2.7.73H18.93l-2.93 5.34H48V40H16c-2 0-3.51-.88-4.53-2.63-1.02-1.76-1.07-3.5-.13-5.24l3.6-6.53L5.33 5.33H0V0h8.67l2.53 5.33z"
                            fill="currentColor"
                        />
                    </svg>
                    {% if cart_items_count > 0 %}
                        <span class="cart-badge">{{ cart_items_count }}</span>
                    {% endif %}
                </a>
            </div>
        </div>
    </header>

    <nav class="main-nav">
        <ul class="nav-list">
            <li><a href="{{ url_for('store.products_page') }}" class="nav-link {% if active_nav in ['home', 'produtos'] %}active-nav{% endif %}">TODOS OS PRODUTOS</a></li>
            <li><a href="{{ url_for('store.kits_page') }}" class="nav-link {% if active_nav == 'kits' %}active-nav{% endif %}">KITS</a></li>
            <li><a href="{{ url_for('store.skincare_page') }}" class="nav-link {% if active_nav == 'skincare' %}active-nav{% endif %}">SKINCARE</a></li>
            <li><a href="{{ url_for('store.maquiagem_page') }}" class="nav-link {% if active_nav == 'maquiagem' %}active-nav{% endif %}">MAQUIAGEM</a></li>
            <li><a href="{{ url_for('store.institutional_page') }}" class="nav-link {% if active_nav == 'institucional' %}active-nav{% endif %}">INSTITUCIONAL</a></li>
        </ul>
    </nav>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <section class="flash-container">
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            </section>
        {% endif %}
    {% endwith %}

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="main-footer">
        <div class="footer-grid">
            <div class="footer-logo">
                <div class="institution-placeholder">Informacao omitida e anonimizada para avaliacao.</div>
            </div>

            <div class="footer-info">
                <p class="copyright">&copy; 2026 - Alo!Mana?<br>Projeto academico</p>
                <p class="instituicao">Instituicao parceira (informacao omitida e anonimizada para avaliacao).</p>
                <p class="footer-admin-link">
                    {% if current_admin %}
                        <a href="{{ url_for('admin.occurrences_page') }}">Area administrativa</a>
                    {% else %}
                        <a href="{{ url_for('admin.login_page') }}">Area administrativa</a>
                    {% endif %}
                </p>
            </div>

            <div class="footer-spacer"></div>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>
</html>

